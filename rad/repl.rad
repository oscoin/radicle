(load! "rad/prelude.rad")

;; The Repl

(def read-line-or-exit! (fn []
  (def line (get-line!))
  (if (eq? line nil)
    (exit! 0)
    (read-many line))))

(def repl
  {:name "repl"
   ;; Parse errors are thrown here
   :getter read-line-or-exit!})

(subscribe-to! repl (fn [xs] (map print! xs)))
